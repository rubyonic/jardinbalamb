<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../estilos/estilos.css">
    <title>Jardín de Balamb</title>
    <link rel="icon" type="image/x-icon" href="../ico/favicon.png">
</head>
<body class="virtualhtml">
    <header class="virtualheader">
        <div class="header-container">
        <div class="menu-logo">
          <a class="logo" href="../index.html">
            <span class="big-letter">J</span>ardin 
            <span class="big-letter">B</span>alamb
          </a>
          <span class="cara">h</span>
        </div>
        <nav>
          <ul>
            <li class="dropdown">
              <a class="linea" href="../pages/bastion.html">El Bastion</a>
              <ul class="submenu">
                <li><a href="../pages/bastionpages/salon.html">Salones de Conjuracion</a></li>
                <li><a href="../pages/bastionpages/director.html">Nuestro director</a></li>
                <li><a href="../pages/bastionpages/cronicas.html">Crónicas del Bastión</a></li>
                <li><a href="../pages/bastionpages/entrenamiento.html">Entrenamientos de Combate</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="linea" href="../pages/camino.html">Camino del Heroe</a>
              <ul class="submenu">
                <li><a href="../pages/camino.html">Rango de Aspirante</a></li>
                <li><a href="../pages/caminopages/maestro.html">Rango de Maestro</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="linea" href="../pages/torre.html">Consejo de la Torre</a>
              <ul class="submenu">
                <li><a href="../pages/torrepages/arcano.html">Inscripciones Arcanas</a></li>
                <li><a href="../pages/torrepages/talisma.html">Talismanes de Poder</a></li>
                <li><a href="../pages/torrepages/certificado.html">Certificados de Heroe</a></li>
                <li><a href="../pages/torrepages/documento.html">Documentos del Viajero</a></li>
                <li><a href="../pages/torrepages/alianza.html">Alianza de Maestros</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a class="linea" href="../pages/guia.html">Guia de Aventura</a>
              <ul class="submenu">
                <li class="dropdown">
                  <a href="../pages/guiapages/ciencias.html">Ciencias</a>
                </li>
                <li class="dropdown">
                  <a href="../pages/guiapages/conocimiento.html">Conocimientos Universales</a>
                </li>
                <li class="dropdown">
                  <a href="../pages/guiapages/invocacion.html">Invocaciones y Armas</a>
                </li>
              </ul>
            </li>
            
            <li class="">
              <a class="linea" href="../pages/virtual.html">Virtual</a>
            </li>
            <li class="">
              <a class="linea" href="../pages/contacto.html">Contacto</a>
            </li>
          </ul>
        </nav>
      </div>
      </header>

      <main>
        <section class="intro">
            <h2><img class="iconos" src="../ico/estrella.png" alt="">Juego Magico<img class="iconos" src="../ico/estrella.png" alt=""></h2>
            <p>Pulsa primero el boton de abajo. Memoriza la secuencia y repítela correctamente haciendo click en las formas. No seas ansioso, espera a que las animaciones acaben.</p>
            <div id="zona-juego">
                <div class="simbolo" id="circulo"></div>
                <div class="simbolo" id="triangulo"></div>
                <div class="simbolo" id="estrella"></div>
                <div class="simbolo" id="cuadrado"></div>
            </div>
            <button style="margin-top: 10vh" id="empezar">Comenzar Juego</button>
          </section>
      </main>
      <div id="alerta" class="alerta">
        <div class="borde-arcoiris"></div>
        <p style= "font-size: larger; font-family: 'jenson';">Puedes intentarlo de nuevo! No hay mas recompensas a partir de ahora.
        </p>
        <button onclick="cerrarAlerta()">Cerrar</button>
    </div>
    
    <footer>
      <div class="footer-container">
        <div>
            <p>&copy; 2024 <strong>Jardín de Balamb</strong>. Todos los derechos reservados. | <a href="#">Politica de privacidad.</a> | <a href="https://d36fw6y2wq3bat.cloudfront.net/recipes/cookies-americanas-de-chocolate/900/cookies-americanas-de-chocolate_version_1703822516.jpg">Administrar configuración de cookies.</a></p>
        </div>
        <div class="redes">
          <a href="https://x.com/home"><img src="../ico/gorjeo.png" alt=""></a>
          <a href="https://x.com/home"><img src="../ico/frambuesa-pi.png" alt=""></a>
          <a href="https://x.com/home"><img src="../ico/walmart.png" alt=""></a>
          <a href="https://x.com/home"><img src="../ico/hilos.png" alt=""></a>
        </div>
      </div>
  </footer>
    
      <script>
        const letras = ['D', 'm', 'x', 'z', 'l', 'w', 'H', 'Q'];
        document.querySelector('.cara').textContent = letras[Math.floor(Math.random() * letras.length)];
    
        // Funciones para mostrar y cerrar la alerta
        function mostrarAlerta() {
            document.getElementById("alerta").style.display = "block"; // Muestra la alerta
        }
    
        function cerrarAlerta() {
            document.getElementById("alerta").style.display = "none"; // Cierra la alerta
        }
    
        document.addEventListener("DOMContentLoaded", () => {
            const simbolos = ["circulo", "triangulo", "estrella", "cuadrado"];
            let secuencia = [];
            let respuestaJugador = [];
            let nivel = 0;
    
            const iniciarJuego = () => {
                nivel = 0;
                secuencia = [];
                respuestaJugador = [];
                siguienteNivel();
            };
    
            const siguienteNivel = () => {
                nivel++;
                respuestaJugador = [];
                secuencia.push(simbolos[Math.floor(Math.random() * simbolos.length)]);
                console.log("Secuencia actual:", secuencia); // Para depuración
                mostrarSecuencia();
            };
    
            const mostrarSecuencia = async () => {
                desactivarSimbolos(); // Evita que el jugador haga clic durante la secuencia
                for (const simbolo of secuencia) {
                    await iluminarSimbolo(simbolo);
                }
                activarSimbolos(); // Habilita los clics después de la secuencia
            };
    
            const iluminarSimbolo = (id) => {
                return new Promise((resolve) => {
                    const elemento = document.getElementById(id);
                    elemento.classList.add("activo");
                    setTimeout(() => {
                        elemento.classList.remove("activo");
                        resolve();
                    }, 700); // Ajusta el tiempo para que el efecto sea visible
                });
            };
    
            const validarRespuesta = (id) => {
                respuestaJugador.push(id);
                const indice = respuestaJugador.length - 1;
    
                if (respuestaJugador[indice] !== secuencia[indice]) {
                    mostrarAlerta(); // Muestra la alerta personalizada
                    iniciarJuego(); // Reinicia el juego
                    return;
                }
    
                if (respuestaJugador.length === secuencia.length) {
                    setTimeout(siguienteNivel, 1000);
                }
            };
    
            const activarSimbolos = () => {
                simbolos.forEach((id) => {
                    const elemento = document.getElementById(id);
                    elemento.style.pointerEvents = "auto";
                });
            };
    
            const desactivarSimbolos = () => {
                simbolos.forEach((id) => {
                    const elemento = document.getElementById(id);
                    elemento.style.pointerEvents = "none";
                });
            };
    
            document.getElementById("empezar").addEventListener("click", () => {
                iniciarJuego();
                console.log("El juego ha comenzado.");
            });
    
            simbolos.forEach((id) => {
                document.getElementById(id).addEventListener("click", () => validarRespuesta(id));
            });
        });
    </script>
    
</body>
</html>